### 被控主机上线
#### 1、通过心跳websocket获取session信息
```python
# 从数据库中获取主机信息
hosts = Host.list_hosts()
# 1、通过心跳websocket从msf中获取session信息
sessions = HeartBeat.list_sessions()
# 1.1、从缓存XCACHE_MSF_JOB_CACHE中获取msfrpc的Jobs
msfjobs = Job.list_msfrpc_jobs()
# 1.2、从msf中获取被控主机的session
session_info_dict = RpcClient.call(Method.SessionList, timeout=RPC_FRAMEWORK_API_REQ)
# [{"id": 5, "exploit_uuid": "fe0e1230-90a8-013a-88e1-000c29627aa3", "job_info": {"job_id": 4, "PAYLOAD": "windows/x64/meterpreter/reverse_tcp", "LPORT": 1234, "LHOST": "172.16.12.135", "RHOST": null}, "type": "meterpreter", "session_host": "172.16.12.131", "tunnel_local": "172.16.12.135:1234", "tunnel_peer": "172.16.12.131:49158", "tunnel_peer_ip": "172.16.12.131", "tunnel_peer_locate_zh": "\u4fdd\u7559   ", "tunnel_peer_locate_en": "Intranet   Local", "comm_channel_session": null, "via_exploit": "exploit/multi/handler", "via_payload": "payload/windows/x64/meterpreter/reverse_tcp", "uuid": "9xexzlqu", "platform": "windows", "last_checkin": 1648522695, "fromnow": 35, "info": "win7-PC\\Administrator @ WIN7-PC", "arch": "x64", "user": "win7-PC\\Administrator", "computer": "WIN7-PC", "load_powershell": false, "load_python": false, "advanced_info": {"username": "win7-PC\\Administrator", "sysinfo": {"Computer": "WIN7-PC", "OS": "Windows 7 (6.1 Build 7601, Service Pack 1).", "Architecture": "x64", "BuildTuple": null, "System Language": "zh_CN", "Domain": "WORKGROUP", "Logged On Users": 1, "IsAdmin": true, "Pid": 2184}}, "os": "Windows 7 (6.1 Build 7601, Service Pack 1).", "os_short": "Windows 7 ", "isadmin": true, "pid": 2184, "routes": [], "available": true}]
```
# IP地址数据库文件
```text
STATICFILES/STATIC/ip2region.db
STATICFILES/STATIC/GeoLite2-City.mmdb
STATICFILES/STATIC/GeoLite2-ASN.mmdb
STATICFILES/STATIC/GeoLite2-Country.mmdb
```
